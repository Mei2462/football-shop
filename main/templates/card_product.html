{% load static %}
<article
  class="group relative overflow-hidden rounded-2xl bg-white/80 dark:bg-gray-900/70 ring-1 ring-gray-200/60 dark:ring-gray-800 backdrop-blur-sm transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5"
  aria-label="{{ product.name }}"
>
  <!-- Thumbnail -->
  <div class="relative aspect-[16/9] overflow-hidden">
    {% if product.thumbnail %}
      <img
        src="{{ product.thumbnail }}"
        alt="{{ product.name }}"
        class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
        loading="lazy"
      >
    {% else %}
      <div class="flex h-full w-full items-center justify-center bg-gray-100 dark:bg-gray-800 text-gray-400 text-sm">
        <img src="{% static 'image/no-product.png' %}" alt="Default" class="h-24 w-24 rounded object-cover">        <img src="{% static 'image/no-product.png' %}" alt="Default" class="h-24 w-24 rounded object-cover">
      </div>
    {% endif %}

    <!-- Overlay gradient on hover -->
    <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>

    <!-- Category Badge -->
    <div class="absolute left-3 top-3 flex items-center gap-1.5">
      <span class="inline-flex items-center gap-1 rounded-full bg-green-600 px-2.5 py-1 text-xs font-medium text-white shadow-sm">
        <!-- tag icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path d="M17.707 10.293 9.707 2.293A1 1 0 0 0 9 2H3a1 1 0 0 0-1 1v6c0 .265.105.52.293.707l8 8a1 1 0 0 0 1.414 0l6-6a1 1 0 0 0 0-1.414ZM5.5 5a1.5 1.5 0 1 1-3.001.001A1.5 1.5 0 0 1 5.5 5Z"/>
        </svg>
        {{ product.get_category_display }}
      </span>
    </div>

    <!-- Status Badge (Featured) -->
    {% if product.is_featured %}
    <div class="absolute right-3 top-3">
      <span class="inline-flex items-center gap-1 rounded-full bg-yellow-100 px-2.5 py-1 text-xs font-semibold text-yellow-900 ring-1 ring-yellow-300/60">
        <!-- star icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path d="M9.049 2.927a1 1 0 0 1 1.902 0l1.07 3.292a1 1 0 0 0 .95.69h3.462a1 1 0 0 1 .588 1.81l-2.801 2.034a1 1 0 0 0-.364 1.118l1.07 3.292a1 1 0 0 1-1.54 1.118L10 14.347l-2.386 1.925a1 1 0 0 1-1.54-1.118l1.07-3.292a1 1 0 0 0-.364-1.118L3.98 8.72a1 1 0 0 1 .588-1.81H8.03a1 1 0 0 0 .95-.69l1.07-3.292Z"/>
        </svg>
        Featured
      </span>
    </div>
    {% endif %}

    <!-- Quick action (visible on hover) -->
    <div class="absolute inset-x-3 bottom-3 opacity-0 transition-opacity duration-300 group-hover:opacity-100">
      <a href="{% url 'main:show_product' product.id %}"
         class="inline-flex w-full items-center justify-center gap-2 rounded-xl bg-white/90 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm backdrop-blur hover:bg-white focus:outline-none focus:ring-2 focus:ring-green-600">
        <!-- eye icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path d="M10 3C5 3 1.73 7.11.46 9.36a1.5 1.5 0 0 0 0 1.28C1.73 12.89 5 17 10 17s8.27-4.11 9.54-6.36a1.5 1.5 0 0 0 0-1.28C18.27 7.11 15 3 10 3Zm0 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8Z"/>
        </svg>
        View Details
      </a>
    </div>
  </div>

  <!-- Content -->
  <div class="p-5">
    <!-- Product Title -->
    <h3 class="mb-2 line-clamp-2 text-lg font-semibold leading-tight text-gray-900 dark:text-white">
      <a href="{% url 'main:show_product' product.id %}" class="transition-colors hover:text-green-600 focus:outline-none focus:ring-2 focus:ring-green-600">
        {{ product.name }}
      </a>
    </h3>

    <!-- Price & Stock as chips -->
    <div class="mb-4 flex flex-wrap items-center gap-2 text-sm">
      <span class="inline-flex items-center gap-1 rounded-full bg-gray-100 px-2.5 py-1 text-gray-700 dark:bg-gray-800 dark:text-gray-300">
        <strong class="font-semibold">Price:</strong>
        <span>{{ product.get_price_display }}</span>
      </span>

      <span class="inline-flex items-center gap-1 rounded-full bg-gray-100 px-2.5 py-1 text-gray-700 dark:bg-gray-800 dark:text-gray-300">
        <strong class="font-semibold">Stock:</strong>
        <span>{{ product.get_stock_display }}</span>
      </span>
    </div>

    <!-- Divider -->
    <div class="h-px w-full bg-gradient-to-r from-transparent via-gray-200/80 to-transparent dark:via-gray-800/80"></div>

    <!-- Action Buttons -->
    {% if user.is_authenticated and product.user == user %}
      <div class="mt-4 flex items-center justify-between">
        <div class="flex gap-1.5">
          <a href="{% url 'main:edit_product' product.id %}"
             class="inline-flex items-center gap-1 rounded-lg border border-blue-200/60 bg-blue-50 px-2.5 py-1.5 text-xs font-semibold text-blue-700 transition hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:border-blue-900/40 dark:bg-blue-900/30 dark:text-blue-300 dark:hover:bg-blue-900/50">
            <!-- pencil -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 0 1 2.828 2.828l-9.193 9.193-3.889.647a.75.75 0 0 1-.867-.867l.647-3.889 9.193-9.193Z"/><path d="M12.379 4.793 15.207 7.62" /></svg>
            Edit
          </a>
          <a href="{% url 'main:delete_product' product.id %}"
             class="inline-flex items-center gap-1 rounded-lg border border-red-200/60 bg-red-50 px-2.5 py-1.5 text-xs font-semibold text-red-700 transition hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-600 dark:border-red-900/40 dark:bg-red-900/30 dark:text-red-300 dark:hover:bg-red-900/50">
            <!-- trash -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 20 20" fill="currentColor"><path d="M6 7.75a.75.75 0 0 1 1.5 0v7.5a.75.75 0 0 1-1.5 0v-7.5ZM9.25 7.75a.75.75 0 0 1 1.5 0v7.5a.75.75 0 0 1-1.5 0v-7.5ZM12.5 7.75a.75.75 0 0 1 1.5 0v7.5a.75.75 0 0 1-1.5 0v-7.5Z"/><path fill-rule="evenodd" d="M3.5 5.75A.75.75 0 0 1 4.25 5h11.5a.75.75 0 0 1 0 1.5H14.5v9A2.5 2.5 0 0 1 12 18H8A2.5 2.5 0 0 1 5.5 15.5v-9H4.25A.75.75 0 0 1 3.5 5.75ZM7 4.25A1.75 1.75 0 0 1 8.75 2.5h2.5A1.75 1.75 0 0 1 13 4.25V5H7v-.75Z" clip-rule="evenodd"/></svg>
            Delete
          </a>
        </div>
      </div>
    {% endif %}
  </div>
</article>